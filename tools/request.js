var config = require("../server/config");var moment = require("moment");var data = require("../server/data")(config);//var Sequelize = require("sequelize");var args = process.argv.slice(2);module.exports = {    length: function (startDate, cb) {        data.inspect.count({            include: [{                model: data.request,                where: {                    createdAt: {$lt: startDate}                }            }]        }).then(function (inspectCount) {            data.request.count({                where: {                    createdAt: {$lt: startDate}                }            }).then(function (requestCount) {                console.log("========== Request count:" + requestCount);                console.log("========== Inspects count:" + inspectCount);                cb && cb();            });        });    },    clean: function (startDate, cb) {        //data.inspect.destroy({        //    where: {        //        include: [{        //            model: data.request,        //            where: {        //                createdAt: {$lt: startDate}        //            }        //        }]        //    }        //        //}).then(function (inspectCount) {        //    console.log("========== Inspects Delete Count:" + inspectCount);        //    data.request.destroy({        //        where: {        //            createdAt: {$lt: startDate}        //        }        //    }).then(function (requestCount) {        //        console.log("========== Request Delete Count:" + requestCount);        //        cb && cb();        //    });        //});    }};if (args[0] === 'clean') {    var startDate = moment().add(-6, "month").valueOf();    module.exports.clean(startDate);} else if (args[0] === 'length') {    var startDate = moment().add(-6, "month").valueOf();    module.exports.length(startDate);} else if (args[0] === 'all') {    var startDate = moment().valueOf();    module.exports.length(startDate);}